---
import MainLayout from "@layouts/MainLayout.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const parts = await getCollection("parts");
  return parts.map((entry) => ({ params: { part: entry.slug } }));
}

const { part } = Astro.params;
const parts = await getCollection("parts");
const entry = parts.find((p) => p.slug === part);

if (!entry) {
  return Astro.redirect("/part-1");
}

import H1 from '@components/mdx/H1.astro';
import H2 from '@components/mdx/H2.astro';
import H3 from '@components/mdx/H3.astro';

const { Content } = await entry.render();
---
<MainLayout title={`Maciej Witek â€” ${entry.data.title}`} description={`Podstrona ${entry.data.title}`}>
  <div style="margin-top: 4rem;">
    <section class="space-y-6">
      <article class="prose dark:prose-invert max-w-none">
        <Content components={{ h1: H1, h2: H2, h3: H3 }} />
      </article>
    </section>
  </div>
</MainLayout>
